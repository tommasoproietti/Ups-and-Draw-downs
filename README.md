# Reproducibility Package for: Ups and (Draw)downs

**Date assembled:** 2025-07-04  
**Author: Tommaso Proietti ‚Äì University of Rome Tor Vergata
          Email: tommaso.proietti@uniroma2.it 
 
 ---
## üìä Data Files

All data is provided in the `data/` folder:

| File                                   | Description                             | Format | Source         |
|----------------------------------------|-----------------------------------------|--------|----------------|
| `^GSPC.csv`                            | Daily S&P 500 index                     | CSV    | Yahoo Finance  |
| `sp500.mat`                            | Time series of 503 S&P 500 component stocks | MAT    | Proprietary     |
| `sSP500_Peaks_Troughs_Multivariate.mat` | Output from peak/trough detection       | MAT    | Generated by script |
| `sSP500_tau_multivariate.mat`          | Tau-drawdowns and tau-drawups           | MAT    | Generated by script |
| `sRollingForecasts.mat`                | Rolling forecasts (Sequential MC)       | MAT    | Generated by script |
| `sRollingForecasts_dd.mat`             | Direct forecasts of drawdowns (D-ARMA, D-HAR) | MAT | Generated by script |
| `sRollingForecasts_cond.mat`           | Conditional forecasts (C-HAR)           | MAT    | Generated by script |
| `sRollingForecasts_cond_factor.mat`    | Factor-based conditional forecasts (C-Factor HAR) | MAT | Generated by script |

## üìÅ Repository Structure

- `data/`: MATLAB `.mat` files and CSVs used for analysis and forecasting.
- `scripts/`: MATLAB scripts for generating all figures and tables in the paper.
- `functions/`: Custom MATLAB functions used in the scripts.
- `README.md`: This document.
- `LICENSE`: License information (e.g., MIT, CC-BY-NC).
- `reproduce_all.m`: Master script to reproduce all figures and tables (optional).

---
## ‚öôÔ∏è Functions

The following custom MATLAB functions are used throughout the analysis:

| File                         | Description                                           |
|------------------------------|-------------------------------------------------------|
| `fMaxFilter.m`               | Realizes max (min), drawdown (up), and lead time processes |
| `fBearBullDating.m`          | Implements the dating algorithm for turning points   |
| `fGoodmanKruskal.m`          | Computes Goodman and Kruskal‚Äôs gamma statistic       |
| `fSsfMBfiltering.m`          | State space decomposition model                      |
| `fAugmentedStateSmoother.m`  | Kalman filtering and smoothing implementation        |

## üíª Computing Environment

- **Language**: MATLAB R2023a  
- **Toolboxes used**: Statistics and Machine Learning, Econometrics Toolbox, Parallel Computing  
- **Platform**: Windows 
- **Expected runtime**: ~ 20 minutes on Intel i7, 16 GB RAM
- **Special setup**:  parallel computing enhances speed

---

## üîß Running the Reproducibility Check

Each script is self-contained and will generate the corresponding tables/figures as in the paper. The typical workflow is:

### To reproduce Section 2:

```matlab
run('scripts/sSP500_Figure1Table1.m')
